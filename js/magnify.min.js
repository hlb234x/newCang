jQuery.fn.extend({setmagnify:function(){var s=arguments[0]||{},i=s.pos,m=void 0===s.scale?2:s.scale;this.each(function(){var h=$(this).children(".magnify-glass"),o=$(this).children(".magnify-item"),g=$(this).find(".magnify-lens");if(s.scale&&(h.css("backgroundSize",100*m+"% "+100*m+"%"),$(".magnify-lens").width(100/m+"%").height(100/m+"%")),o.children(".magnify-img").length){var e=o.children(".magnify-img");$(this).width(e.width()).height(e.height()),h.css({backgroundImage:"url("+e.attr("src")+")"})}else h.css({backgroundImage:o.css("backgroundImage")});var f=o.width(),l=o.height(),d=g.width(),r=g.height();if(i)switch(i){case"top":h.css({top:"calc(-100% + 10px)",left:0});break;case"bottom":h.css({top:"calc(100% + 10px)",left:0});break;case"left":h.css({left:"calc(-100% + 10px)"})}o.mousemove(function(e){e=e||window.event,h.show(),g.show();var s=o.offset().left,i=o.offset().top,t=e.pageX,a=e.pageY,c=t-s-d/2,n=a-i-r/2;c<0?c=0:f-d<c&&(c=f-d),n<0?n=0:l-r<n&&(n=l-r),g.css({left:c,top:n}),h.css({backgroundPosition:c*m*-1+"px "+n*m*-1+"px"})}).mouseleave(function(){g.hide(),h.hide()})})}});